# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

В данном проекте, качестве паттерна проектирования я выбираю MVP, то есть Model, View, Presenter. 

Для приложения важна масштабируемость и разделение ответственности и другие принципы ООП, 
поэтому логику проекта, рамках паттерна MVP, 
прописывают в слое Model, то что видно пользователю , 
или UI, прописывают в слое View. 
Логику соединения этих слоев выполняет Presenter. 

Типы данных проекта, базовый код, описываю в файле src/types/index.ts

Там описаны интерфейсы для данных и отображения.


## Базовый код.


### 1. Класс Card<T>

находится практически во всех частях проекта, реализует метода работы с карточкой товара.

Класс является дженериком, принимает в переменной T, тип данных в карточке товара. 

Конструктор принимает аргументы:

1. Массив данных о товаре

Какие имеет методы:

get, set, render - для получения данных, отправки данных и передачи их для отображения.

1. Класс EventEmitter

Реализует паттерн “Наблюдатель”, чтобы уведомлять пользователя о происходящих событиях.

Имеет методы on, off, emit - для подписки на событие, отписки от него и для уведомления о событии.

## Компоненты модели данных (бизнес-логика)

### 1. Класс Model<T>

Принимает данные с сервера, хранит, изменяет, отправляет. Получает их через класс Api. Передает данные в отображение через презентер.

Принимает события.

## Компоненты представления.

### 1. Класс CardUI

создается экземпляр класса, затем этот экземпляр используется при показе галереи товаров на главной странице, 
при показе одной карточки товара в модальном окне, при показе списка товаров в корзине. 
Объект карточки имеет три шаблона: 
для показа в галерее товаров на главной странице, 
для показа подробной информации о товаре в модальном окне, 
и шаблон для карточки в списке товаров в корзине.

Класс карточки делаю один, передавая в его конструктор 
как параметры шаблон карточки и обработчик клика, соответствующий шаблону.

Экземпляр карточки для любого шаблона в классе Card создаётся одинаковым способом - 
с помощью метода render родительского класса Component и методов-сеттеров самого класса Card. 
В этот метод render передаётся объект с данными (атрибутами) для соответствующего шаблона карточки.

### 2. Класс GalleryUI 

данный класс отображает массив карточек товаров. Позволяет выделить карточку кликом.

### 3. Класс PageUI

Представляет собой страницу, с галереей товаров, отображением элемента счетчика товаров в корзине,  иконкой корзины.

Класс главной страницы не связан с шаблоном карточки товара.

### 4. Класс BasketUI 

реализует корзину с покупками. Принимает массив карточек, отображает общую сумму покупок, 
с возможностью продолжить и перейти на следующую стадию и с возможностью удалить товар из списка.

### 5. Класс ModalUI

Реализует всплывающее окно, которое присутствуют почти на всех этапах приложения. 
Является оберткой, например, для этапа корзины и способа оплаты. 
Отрабатывает методы открытия и закрытия окна, которые наследуются другими классами, в которых используются данные окна.

### 6. Класс SuccessUI

Отображает финальное окно, с поздравлениями о завершении процесса. 

Показывает количество списанных средств. Позволяет закрыть окно, для повторения цикла покупок.

### 7. Класс FormUI  

Все классы принимают в конструктор элемент разметки и событие.

Генерируемые события, это события, устанавливаемые разработчиком для оптимизации способа программирования и структуры проекта.

На генерируемые события происходит подписка заинтересованных обработчиков.

## Ключевые типы данных

```
type HTMLElement = text/css | null ; // элемент разметки
type string = string; // данные о товаре в виде строки
type number = number; // данные о товаре в виде числа
type boolean = boollean; // отображение состояния
type OrderStatus = 'wait' | 'active' | 'closed'; // состояние заказа
```

## События в приложении

```
enum Events {
	MODAL_OPEN = 'modal:open' // Открыть модальное окно
	MODAL_CLOSE = 'modal:close' // Закрыть модальное окно
	BASKET_OPEN = 'basket:open' // Открыть корзину
	ITEMS_CHANGED = 'items:changed' // Изменились элементы каталога
	CARD_SELECT = 'card:select' // Открыть карточку
	ORDER_SUBMIT = 'order:submit' // Подтвердить заказ 
	ORDER_CHANGED = '/^order\..*:change/' // Изменилось одно из полей
	ERROR_CHANGE = 'formErrors:change' // Изменилось состояние валидации формы
	ORDER_OPEN = 'order:open' // Открыть форму заказа
	PREVIEW_CHANGED = 'preview:changed' //  Изменен открытый выбранный заказ
};     
```

## Описание слоев.

Когда получаем данные с сервера через класс Api, они попадают в класс модели, где хранятся и изменяются. 

Для отображения, данные из модели передаются через презентер в классы представления.

Данные получаемые с сервера можем увидеть в коллекции Postman.

Это карточка товара с id, описанием, картинкой, заголовком, категорией, ценой.

Код слоя Model и View выделены в классы, 

слой Presenter

код презентера не выделяется в отдельный класс и будет в дальнейшем размещен в src/types/index.ts


### Автор Зуев Сергей

   